<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover"
  />
  <title>Notes</title>
  <link rel="stylesheet" href="styles.css" />

  <!-- CodeMirror (CDN) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/codemirror.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/codemirror.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/mode/javascript/javascript.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
  <header class="app-header" id="appHeader">
    <div class="header-actions">
      <label class="label" for="categoryFilterSelect">Category</label>
      <select id="categoryFilterSelect" class="select"></select>

      <div class="spacer"></div>

      <button id="newNoteBtn" class="btn primary">+ New Note</button>
      <button id="manageCategoriesBtn" class="btn ghost">Categories</button>
    </div>
  </header>

  <main>
    <!-- Cards View -->
    <section id="cardsView" class="cards-grid" aria-live="polite"></section>
  </main>

  <!-- Note Editor Overlay (full-screen takeover) -->
  <div id="editorOverlay" class="overlay hidden" role="dialog" aria-modal="true">
    <div id="editorPanel" class="editor-panel">
      <div class="editor-topbar">
        <button id="closeEditorBtn" class="icon-btn" title="Back" aria-label="Back">âŸµ</button>

        <input id="noteTitle" class="title-input" placeholder="Untitledâ€¦" />

        <div class="toolbar">
          <label class="sr-only" for="primaryCategorySelect">Category</label>
          <select id="primaryCategorySelect" class="select small"></select>

          <button class="tool" data-cmd="bold" title="Bold (Ctrl+B)">B</button>
          <button class="tool" data-cmd="italic" title="Italic (Ctrl+I)">I</button>
          <button class="tool" data-cmd="underline" title="Underline (Ctrl+U)">U</button>
          <button id="insertCheckboxBtn" class="tool" title="Insert checklist">â˜‘ï¸Ž</button>

          <label class="tool file-label" title="Insert image">
            ðŸ–¼
            <input id="imageInput" type="file" accept="image/*" hidden />
          </label>

          <button id="recordBtn" class="tool" title="Record voice">ðŸŽ™</button>
          <button id="toggleCodeModeBtn" class="tool" title="Code mode">&lt;/&gt;</button>
        </div>
      </div>

      <!-- Editor areas -->
      <div id="richEditor" class="editor" contenteditable="true" spellcheck="true"></div>
      <textarea id="codeEditor" class="code-editor hidden" spellcheck="false"></textarea>

      <div class="editor-bottombar">
        <div id="saveStatus" class="save-status">Saved âœ“</div>
      </div>
    </div>
  </div>

  <!-- Manage Categories Modal -->
  <div id="categoriesModal" class="modal hidden" role="dialog" aria-modal="true" aria-label="Manage Categories">
    <div class="modal-card">
      <div class="modal-header">
        <h3>Manage Categories</h3>
        <button id="closeCategoriesBtn" class="icon-btn" aria-label="Close">âœ•</button>
      </div>
      <div id="categoriesList" class="category-list"></div>
      <div class="category-form">
        <input id="newCategoryName" class="input" placeholder="Category name (e.g., Work, Ideas)" />
        <input id="newCategoryColor" class="input" type="color" value="#F0F4FF" />
        <button id="addCategoryBtn" class="btn primary">Add</button>
      </div>
    </div>
  </div>

  <script type="module" src="app.js"></script>
  <script type="module" src="db.js"></script>
  <script type="module" src="color.js"></script>
  <script type="module" src="editor.js"></script>
  <script type="module" src="audio.js"></script>
  <script type="module" src="ui.js"></script>
  <script type="module" src="sync.js"></script>
</body>
</html>