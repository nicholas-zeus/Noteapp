<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Notes</title>
  <link rel="manifest" href="manifest.json" />
<meta name="theme-color" content="#1b2030" />
<link rel="apple-touch-icon" href="icons/icon-192.png" />
  <link rel="stylesheet" href="styles.css" />

  <!-- CodeMirror (CDN) -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/codemirror.min.css"
        crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/codemirror.min.js"
          crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.14/mode/javascript/javascript.min.js"
          crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        
</head>

<body>
  <!-- ======= HEADER / CARD VIEW ======= -->
  <header class="app-header" id="appHeader">
    <div class="header-actions">
      <label class="label" for="categoryFilterSelect">Category</label>
      <select id="categoryFilterSelect" class="select"></select>
      <div class="spacer"></div>
      <button id="newNoteBtn" class="btn primary" title="New note">+</button>
      <button id="manageCategoriesBtn" class="btn ghost">Categories</button>
    </div>
  </header>

  <main>
    <section id="cardsView" class="cards-grid" aria-live="polite"></section>
  </main>

  <!-- ======= NOTE EDITOR OVERLAY ======= -->
  <div id="editorOverlay" class="overlay hidden" role="dialog" aria-modal="true">
    <div id="editorPanel" class="editor-panel">
      <!-- --- TOP BAR --- -->
      <div class="editor-topbar">
        <button id="closeEditorBtn" class="icon-btn" title="Back" aria-label="Back">âŸµ</button>
        <input id="noteTitle" class="title-input" placeholder="Untitledâ€¦" />
        <select id="primaryCategorySelect" class="select small"></select>
        <button id="moreMenuBtn" class="icon-btn" title="More">â‹®</button>
      </div>

      <!-- --- EDITORS --- -->
      <div id="richEditor" class="editor" contenteditable="true" spellcheck="true"></div>
      <textarea id="codeEditor" class="code-editor hidden" spellcheck="false"></textarea>

      <!-- --- BOTTOM BAR --- -->
      <div class="editor-bottombar">
        <div class="bottom-toolbar">
          <button class="tool" data-cmd="bold" title="Bold (Ctrl+B)">B</button>
          <button class="tool" data-cmd="italic" title="Italic (Ctrl+I)">I</button>
          <button class="tool" data-cmd="underline" title="Underline (Ctrl+U)">U</button>
          <button id="insertCheckboxBtn" class="tool" title="Insert checklist">â˜‘ï¸Ž</button>
        </div>
        <div id="saveStatus" class="save-status">Saved âœ“</div>
      </div>
    </div>

    <!-- --- FLOATING 3-DOT MENU --- -->
    <div id="moreMenu" class="dropdown hidden">
      <button id="addImageMenuBtn" class="dropdown-item">Add Image ðŸ–¼</button>
      <button id="addVoiceMenuBtn" class="dropdown-item">Record Voice ðŸŽ™</button>
      <button id="toggleCodeMenuBtn" class="dropdown-item">Toggle Code Mode &lt;/&gt;</button>
      <button id="deleteNoteMenuBtn" class="dropdown-item danger">Delete Note ðŸ—‘</button>
    </div>
    <input id="imageInput" type="file" accept="image/*" hidden />
  </div>

  <!-- ======= CATEGORY MANAGER ======= -->
  <div id="categoriesModal" class="modal hidden" role="dialog" aria-modal="true" aria-label="Manage Categories">
    <div class="modal-card">
      <div class="modal-header">
        <h3>Manage Categories</h3>
        <button id="closeCategoriesBtn" class="icon-btn" aria-label="Close">âœ•</button>
      </div>
      <div id="categoriesList" class="category-list"></div>
      <div class="category-form">
        <input id="newCategoryName" class="input" placeholder="Category name (e.g., Work, Ideas)" />
        <input id="newCategoryColor" class="input" type="color" value="#F0F4FF" />
        <button id="addCategoryBtn" class="btn primary">Add</button>
      </div>
    </div>
  </div>

  <!-- ======= SCRIPTS ======= -->
  <script type="module" src="app.js"></script>
  <script type="module" src="db.js"></script>
  <script type="module" src="color.js"></script>
  <script type="module" src="editor.js"></script>
  <script type="module" src="audio.js"></script>
  <script type="module" src="ui.js"></script>
  <script type="module" src="sync.js"></script>
  <script type="module" src="pwa.js"></script>
</body>
</html>